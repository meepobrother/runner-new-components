!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/platform-browser"),require("rxjs/add/operator/share")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/platform-browser","rxjs/add/operator/share"],t):t(e["weui-locpicker"]={},e.ng.core,e.ng.platformBrowser)}(this,function(e,t,n){"use strict";var r,i=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});function o(){function e(){return(65536*(1+Math.random())|0).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function s(e){return typeof e}var a=function(){function e(e,n,r){this._differs=e,this.ele=n,this.render=r,this.stateChange=new t.EventEmitter,this.propsChange=new t.EventEmitter,this.onClick=new t.EventEmitter,this.guid=o(),this.props={children:[]},this.state={}}return Object.defineProperty(e.prototype,"state$",{get:function(){return this.stateChange.share()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"props$",{get:function(){return this.propsChange.share()},enumerable:!0,configurable:!0}),e.prototype._onClick=function(e){this.onClick.emit(e)},e.prototype.createGuid=function(){return o()},e.prototype.setState=function(e){this._stateDiffer=this._differs.find(this.state).create(),this.state=e,this.ngDoCheck()},e.prototype.setProps=function(e){this._propsDiffer=this._differs.find(this.props).create(),this.props=e,this.ngDoCheck()},e.prototype.ngOnChanges=function(e){if("props"in e){var t=e.props.currentValue;this._propsDiffer=this._differs.find(t).create()}if("state"in e){t=e.state.currentValue;this._stateDiffer=this._differs.find(t).create()}},e.prototype.ngDoCheck=function(){var e;this._propsDiffer&&((e=this._propsDiffer.diff(this.props))&&this._propsChanges(e));this._stateDiffer&&((e=this._stateDiffer.diff(this.state))&&this._stateChanges(e))},e.prototype.setClass=function(e){for(var t in e)e[t]?this.render.addClass(this.ele.nativeElement,t):this.render.removeClass(this.ele.nativeElement,t)},e.prototype.setStyle=function(e){for(var t in e)this.render.setStyle(this.ele.nativeElement,t,e[t])},e.prototype.removeStyle=function(e){var t=this;"array"==s(e)&&"undefined"!==s(e)?e.map(function(e){t.render.removeStyle(t.ele.nativeElement,e)}):this.render.removeStyle(this.ele.nativeElement,e)},e.prototype.addStyle=function(e,t){this.render.setStyle(this.ele.nativeElement,e,t)},e.prototype.addClass=function(e){this.render.addClass(this.ele.nativeElement,e)},e.prototype.setAttribute=function(e){for(var t in e)"boolean"===s(e[t])?e[t]?this.render.setAttribute(this.ele.nativeElement,t,"true"):this.render.removeAttribute(this.ele.nativeElement,t):this.render.setAttribute(this.ele.nativeElement,t,e[t])},e.prototype.removeClass=function(e){this.render.removeClass(this.ele.nativeElement,e)},e.prototype._stateChanges=function(e){this.onStateChange(e),this.stateChange.emit(this.state)},e.prototype._propsChanges=function(e){this.onPropsChange(e),this.propsChange.emit(this.props)},e}();a.propDecorators={state:[{type:t.Input}],props:[{type:t.Input}],stateChange:[{type:t.Output}],propsChange:[{type:t.Output}],onClick:[{type:t.Output}],_onClick:[{type:t.HostListener,args:["click",["$event"]]}],_id:[{type:t.HostBinding,args:["attr.id"]}]};var p=function(){return function(e,t,n){this.$implicit=e,this.ngForOf=t,this.key=n}}(),c=function(){function e(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._differ=null}return Object.defineProperty(e.prototype,"ngForTemplate",{set:function(e){e&&(this._template=e)},enumerable:!0,configurable:!0}),e.prototype.ngOnChanges=function(e){if("ngEachOf"in e){var t=e.ngEachOf.currentValue;!this._differ&&t&&(this._differ=this._differs.find(t).create())}},e.prototype.ngDoCheck=function(){if(this._differ){var e=this._differ.diff(this.ngEachOf);e&&this._applyChanges(e)}},e.prototype._applyChanges=function(e){var t=this,n=[];e.forEachItem(function(e){if(null==e.previousValue){var r=t._viewContainer.createEmbeddedView(t._template,new p(e.currentValue,t.ngEachOf,e.key),parseInt(e.key,16)),i=new l(e,r,parseInt(e.key,16));n.push(i)}else if(null==e.currentValue)t._viewContainer.remove(parseInt(e.key,16));else{r=t._viewContainer.get(parseInt(e.key,16));t._viewContainer.move(r,parseInt(e.key,16));i=new l(e.currentValue,r,parseInt(e.key,16));n.push(i)}})},e}();c.decorators=[{type:t.Directive,args:[{selector:"[ngEach][ngEachOf]"}]}],c.ctorParameters=function(){return[{type:t.ViewContainerRef},{type:t.TemplateRef},{type:t.KeyValueDiffers}]},c.propDecorators={ngEachOf:[{type:t.Input}],ngForTemplate:[{type:t.Input}]};var l=function(){return function(e,t,n){this.record=e,this.view=t,this.index=n}}(),h=function(e){function t(t,n,r,i){var o=e.call(this,t,n,r)||this;return o.dom=i,window.addEventListener("message",function(e){try{var t=e.data;t&&"locationPicker"===t.module&&(o.props.loc=t)}catch(n){}},!1),o}return i(t,e),t.prototype.updateSrc=function(){var e=this.props,t=e.search,n=e.policy,r=e.total,i=e.radius,o=e.zoom,s=e.mapdraggable,a=e.key,p="https://apis.map.qq.com/tools/locpicker?search="+(t=t||1)+"&type=1&policy="+(n=n||1)+"&total="+(r=r||10)+"&radius="+(i=i||1e3)+"&zoom="+(o=o||15)+"&mapdraggable="+(s=s||1)+"&key="+(a=a||"LHRBZ-4XCWF-FGRJ5-NKTKW-GAQIS-LEBZG")+"&referer=myapp";this.src=this.dom.bypassSecurityTrustResourceUrl(p)},t.prototype.ngOnInit=function(){this.setStyle({height:this.props.height+"px"}),this._id=this.props.id,this.updateSrc()},t.prototype.ngAfterViewInit=function(){},t.prototype.onPropsChange=function(){this.setStyle({height:this.props.height+"px"})},t.prototype.onStateChange=function(){console.log(this.state)},t}(a);h.decorators=[{type:t.Component,args:[{selector:"weui-locpicker-preview",template:'\n      <iframe width="100%" height="100%" frameborder="0" [src]="src"></iframe>\n    ',styles:["\n      iframe {\n        position: absolute;\n        top: 0px;\n        bottom: 0px;\n        left: 0px;\n        right: 0px;\n        z-index: 99999; }\n\n      :host {\n        position: relative;\n        min-height: 350px;\n        display: block; }\n    "]}]}],h.ctorParameters=function(){return[{type:t.KeyValueDiffers},{type:t.ElementRef},{type:t.Renderer2},{type:n.DomSanitizer}]};var u=function(e){function t(t,n,r){return e.call(this,t,n,r)||this}return i(t,e),t.prototype.onPropsChange=function(){},t.prototype.onStateChange=function(){console.log(this.state)},t.prototype.setHeight=function(){var e=document.getElementById(this.props.id);this.render.setStyle(e,"height",this.props.height+"px")},t}(a);u.decorators=[{type:t.Component,args:[{selector:"weui-locpicker-setting",template:'\n      <div class="weui-cells weui-cells_form" [class.focus]="props.focus">\n          <div class="weui-cell">\n              <div class="weui-cell__hd">\n                  <label class="weui-label">高度</label>\n              </div>\n              <div class="weui-cell__bd">\n                  <input class="weui-input" (ngModelChange)="setHeight()" type="number" placeholder="高度" [(ngModel)]="props.height">\n              </div>\n          </div>\n          <div class="weui-cell">\n              <div class="weui-cell__hd">\n                  <label class="weui-label">腾讯秘钥</label>\n              </div>\n              <div class="weui-cell__bd">\n                  <input class="weui-input" type="text" placeholder="腾讯秘钥" [(ngModel)]="props.key">\n              </div>\n          </div>\n      </div>\n    ',styles:["\n\n    "]}]}],u.ctorParameters=function(){return[{type:t.KeyValueDiffers},{type:t.ElementRef},{type:t.Renderer2}]};var f={"weui-locpicker":{setting:u,view:h}},d={"weui-locpicker":h},y=[u,h];e.both=f,e.preview=d,e.entrys=y,e.ɵa=h,e.ɵb=u,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=weui-locpicker.umd.min.js.map
